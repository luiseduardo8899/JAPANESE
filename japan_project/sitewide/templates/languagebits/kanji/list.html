{% extends "account/base_dict.html" %}

{% load i18n %}
{% load account socialaccount %}

{% block content %}
<!-- FACEBOOk: JAVA-SDK-->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.10&appId=512903775708770";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<!-- FACEBOOk: JAVA-SDK-->


<!-- Start your project here-->
        <h1>JLPT N5 Kanji List</h1>
        {% for kanji in kanjilist %}
        {% if forloop.counter0|divisibleby:8 %}
        <div class="flex-center flex-row" >
	<div class="col-md-12">
        {% endif %}

        <div class="card card-cascade wider col-md-1">
        <!--Card-->
        
            <!--Card image-->
            <div class="view card-header text-center ">
                <a class="h1-responsive yellow" href="/language/kanji/{{kanji.seqid}}">{{kanji.text}}</a>
                {% for description in kanji.kanjidescription_set.all %}
                {% if forloop.counter < 2 %}
                <p>{{ description.text }}</p>
                {% endif %}
                {% endfor %}
                {% for onyomi in kanji.onyomi_set.all %}
                {% if forloop.counter < 2 %}
                <p>{{ onyomi.text }}</p>
                {% endif %}
                {% endfor %}
                {% for kunyomi in kanji.kunyomi_set.all %}
                {% if forloop.counter < 2 %}
                <p>{{ kunyomi.text }}</p>
                {% endif %}
                {% empty %}
                <p>...</p>
                {% endfor %} 
            </div>
            <!--/Card image-->

        <!--/.Card-->
        </div>
        {% if forloop.counter|divisibleby:8 %}
        </div>
        </div>
        {% endif %}
        {% endfor %}
</div>

<div style="height:19vh; background-color:white">
</div>

<script>
// Tooltips Initialization
$(function () {
  $('[data-toggle="tooltip"]').tooltip()
})
</script>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId            : '512903775708770',
      autoLogAppEvents : true,
      xfbml            : true,
      version          : 'v2.10'
    });
    FB.AppEvents.logPageView();
  }; 

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));

  share_fb = function(){
  FB.ui(
   {
    method: 'share',
    href: 'luiseduardo8899.hopto.org{{request.get_full_path}}'
  }, function(response){}); 
  toastr.info('Sharing to facebook. Make sure you allow popups');
  }

  share_email = function(){
    // Share to : /dictionary/{{entry.pk}}/send_email/luis.eduardo8899@gmail.com
    myemail = document.getElementById('modal_email_id').value;
    if( is_email(myemail) == true ) {
      toastr.info('Sent entry to email : '+myemail);
      $('#modal_email').modal('hide');
    } else {
      toastr.error('ERROR: emailed entered invalid: '+myemail);
    }
  }

  function is_email(email){      
    var emailReg = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
    return emailReg.test(email); 
  }

</script>

{% endblock %}

